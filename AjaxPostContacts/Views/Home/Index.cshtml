@{
    ViewData["Title"] = "Home Page";
}

@model AjaxPostContacts.Models.ContactModel

<div class="row">
    <div class="col-md-8 col-lg-offset-4">
        <h2>Add User</h2>
        <br />
        <span>Name: </span> @Html.TextBoxFor(x => x.Name, new{@class = "form-control"})<br />
        <span>Date: </span> @Html.TextBoxFor(x => x.RecordDate, new{@class = "form-control", @type = "date"})<br />
        <span>Age: </span> @Html.TextBoxFor(x => x.Age, new{@class = "form-control"})<br />
        <span>City: </span> @Html.DropDownListFor(m => m.City, new SelectList(Enum.GetValues(typeof(Cities))), "Select City")<br />
        <button class="btn btn-default" onclick='SaveContact()'>Save</button> <br /> <br />

    </div>
</div>

<div class="row">
    <div class="col-md-8 col-lg-offset-3">
        <h2>New User List</h2><br />
        <table id="myTable" class="table-striped">
            <tr>
                <th>Name</th>
                <th>Date</th>
                <th>Age</th>
                <th>City</th>
            </tr>
        </table>
    </div>
</div>

<script>
    function SaveContact(){

        var Name = $("#Name").val();
        var RecordDate = $("#RecordDate").val();
        var Age = $("#Age").val();
        var City = $("#City").val();

        //TODO - Post controller'a null gidiyor

        $.ajax({
            type: "POST",
            url: "/Home/AddContact",
            data: {
                name: Name,
                date: RecordDate,
                age: Age,
                city: City,
            },
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $("#myTable").append("<tr><td>" +
                result.Name + "</td><td>" +
                result.RecordDate + "</td><td>" +
                result.Age + "</td><td>" +
                result.City + "</td></tr>");

                $("#Name").val("");
                $("#RecordDate").val("");
                $("#Age").val("");
                $("#City").val("");
            },
            failure: function (result) {
                alert(result.responseText);
            }
        })
    }
</script>
